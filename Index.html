<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <title>Builds</title>
        <link href="Content/Style.css" rel="stylesheet" />
    </head>
<body>
    <div class="page-loading" data-bind="showHide: isFirstLoad()"></div>
    <div class="page-content" data-bind="showHide: !isFirstLoad()">
        <div>
            <div class="topLeft">
                <div class="compile-title">Compile, Build and Unit Tests</div>
                <div class="compile-panel">
                   	<!-- ko if: latestBuildAndCompile() != null -->
    					<!-- ko if: !latestBuildAndCompile().triggeredBy() -->
        					<ul>
                    			<ul>
                    				<li data-bind="attr: { class: latestBuildAndCompile().lowerStatus() + ' ' + latestBuildAndCompile().lowerStatus() + randomClass()}">
                    					<div>
                    						<div class="build-branch" data-bind="text: latestBuildAndCompile().description"></div>
                    						<div class="build-type" data-bind="text: latestBuildAndCompile().buildType.name"></div>
                    						<div class="clear"></div>
                    						<div class="build-status" data-bind="text: latestBuildAndCompile().isRunning() ? '' : latestBuildAndCompile().status"></div>
                    						<div class="clear"></div>
                    						<!-- ko if: latestBuildAndCompile().hasProgress() -->
                    						    <div class="progress-container" data-bind="attr: { 'data-progress' : latestBuildAndCompile().percentageComplete() }"></div>
                    						<!-- /ko -->
                    						<!-- ko if: latestBuildAndCompile().status() == 'FAILURE' -->
                        						Reason for failure:
                        						<div class="build-failReason" data-bind="text: latestBuildAndCompile().statusText"></div>
                        						<div class="clear"></div>
                    						<!-- /ko -->
                    					</div>
                    				</li>
                    			</ul>
                			</ul>
            			<!-- /ko -->
    					<!-- ko if: latestBuildAndCompile().triggeredBy() -->
        					<ul>
                    			<ul>
                    				<li data-bind="attr: { class: latestBuildAndCompile().lowerStatus() + ' ' + latestBuildAndCompile().lowerStatus() + ' ' + latestBuildAndCompile().triggeredBy()}">
                    					<div>
                    						<div class="build-branch" data-bind="text: latestBuildAndCompile().description"></div>
                    						<div class="build-type" data-bind="text: latestBuildAndCompile().buildType.name"></div>
                    						<div class="clear"></div>
                    						<div class="build-status" data-bind="text: latestBuildAndCompile().isRunning() ? '' : latestBuildAndCompile().status"></div>
                    						<div class="clear"></div>
                    						<!-- ko if: latestBuildAndCompile().hasProgress() -->
                    						    <div class="progress-container" data-bind="attr: { 'data-progress' : latestBuildAndCompile().percentageComplete() }"></div>
                    						<!-- /ko -->
                    						Triggered by: 
                    						<div class="build-type" data-bind="text: latestBuildAndCompile().triggeredBy()"></div>
                    						<div class="clear"></div></span>
											<img data-bind="attr:{ src: '/content/users/' + latestBuildAndCompile().triggeredBy() + '.jpg' }" />
                    						<!-- ko if: latestBuildAndCompile().status() == 'FAILURE' -->
                        						Reason for failure:
                        						<div class="build-failReason" data-bind="text: latestBuildAndCompile().statusText"></div>
                        						<div class="clear"></div>
                    						<!-- /ko -->
                    					</div>
                    				</li>
                    			</ul>
                    		</ul>
    					<!-- /ko -->
				<!-- /ko -->
                </div>
            </div>    
            <div class="bottomLeft">
                <div class="accept-title">Deploy to Accept</div>
                <div class="accept-panel">
                    <!-- ko if: latestDeployToAccept() != null -->
    					<!-- ko if: !latestDeployToAccept().triggeredBy() -->
                    		<ul>
                        		<ul>
                    				<li data-bind="attr: { class: latestDeployToAccept().lowerStatus() + ' ' + latestDeployToAccept().lowerStatus() + randomClass2()}">
                    					<div>
                    						<div class="build-branch" data-bind="text: latestDeployToAccept().description"></div>
                    						<div class="build-type" data-bind="text: latestDeployToAccept().buildType.name"></div>
                        					<div class="clear"></div>
                        					<div class="build-status" data-bind="text: latestDeployToAccept().isRunning() ? '' : latestDeployToAccept().status"></div>
                        					<div class="clear"></div>
                        					<!-- ko if: latestDeployToAccept().hasProgress() -->
                    						<div class="progress-container" data-bind="attr: { 'data-progress' : latestDeployToAccept().percentageComplete() }"></div>
                       						<!-- /ko -->
                        					<!-- ko if: latestDeployToAccept().status() == "FAILURE"-->
                        				    	Reason for failure:
                        						<div class="build-failReason" data-bind="text: latestDeployToAccept().statusText"></div>
                        						<div class="clear"></div>
                        					<!-- /ko -->
                        				</div>
                        			</li>
                        		</ul>						
                    		</ul>
                    	<!-- /ko -->
    					<!-- ko if: latestDeployToAccept().triggeredBy() -->
        					<ul>
                        		<ul>
                    				<li data-bind="attr: { class: latestDeployToAccept().lowerStatus() }">
                    					<div>
                    						<div class="build-branch" data-bind="text: latestDeployToAccept().description"></div>
                    						<div class="build-type" data-bind="text: latestDeployToAccept().buildType.name"></div>
                        					<div class="clear"></div>
                        					<div class="build-status" data-bind="text: latestDeployToAccept().isRunning() ? '' : latestDeployToAccept().status"></div>
                        					<div class="clear"></div>
                        					<!-- ko if: latestDeployToAccept().hasProgress() -->
                    						<div class="progress-container" data-bind="attr: { 'data-progress' : latestDeployToAccept().percentageComplete() }"></div>
                       						<!-- /ko -->
                   						    Triggered by:
                   							<div class="build-type" data-bind="text: latestDeployToAccept().triggeredBy()"></div>   							
                  						    <div class="clear"></div>
    										<img data-bind="attr:{ src: '/content/users/' + latestDeployToAccept().triggeredBy() + '.jpg' }" />
                        					<!-- ko if: latestDeployToAccept().status() == "FAILURE"-->
                        				    	Reason for failure:
                        						<div class="build-failReason" data-bind="text: latestDeployToAccept().statusText"></div>
                        						<div class="clear"></div>
                        					<!-- /ko -->
                        				</div>
                        			</li>
                        		</ul>
                        	</ul>
    					<!-- /ko -->
    				<!-- /ko -->
                </div>
            </div>
        </div> 
        <div> 
            <div class="topRight">
                <div class="dev-title">Deploy to Development</div>
                <div class="dev-panel">
                    <!-- ko if: latestDeployToDev() != null -->
    					<!-- ko if: !latestDeployToDev().triggeredBy() -->
                            <ul>
                                <ul>
                                    <li data-bind="attr: { class: latestDeployToDev().lowerStatus() + ' ' + latestDeployToDev().lowerStatus() + randomClass3()}">
                                        <div>
                                            <div class="build-branch" data-bind="text: latestDeployToDev().description"></div>
                                            <div class="build-type" data-bind="text: latestDeployToDev().buildType.name"></div>
                                            <div class="clear"></div>
                                            <div class="build-status" data-bind="text: latestDeployToDev().isRunning() ? '' : latestDeployToDev().status"></div>
                                            <div class="clear"></div>
                                            <!-- ko if: latestDeployToDev().hasProgress() -->
                                                <div class="progress-container" data-bind="attr: { 'data-progress' : latestDeployToDev().percentageComplete() }"></div>
                                            <!-- /ko -->
                                            <!-- ko if: latestDeployToDev().status() == "FAILURE" -->
                                                Reason for failure:
                                                <div class="build-failReason" data-bind="text: latestDeployToDev().statusText"></div>
                                                <div class="clear"></div>
                                            <!-- /ko -->
                                        </div>
                                    </li>
                                </ul>
                            </ul>
                        <!-- /ko -->      
    					<!-- ko if: latestDeployToDev().triggeredBy() -->
        					<ul>
                                <ul>
                                    <li data-bind="attr: { class: latestDeployToDev().lowerStatus() + ' ' + latestDeployToDev().lowerStatus() + ' ' + latestDeployToDev().triggeredBy() }">
                                        <div>
                                            <div class="build-branch" data-bind="text: latestDeployToDev().description"></div>
                                            <div class="build-type" data-bind="text: latestDeployToDev().buildType.name"></div>
                                            <div class="clear"></div>
                                            <div class="build-status" data-bind="text: latestDeployToDev().isRunning() ? '' : latestDeployToDev().status"></div>
                                            <div class="clear"></div>
                                            <!-- ko if: latestDeployToDev().hasProgress() -->
                                                <div class="progress-container" data-bind="attr: { 'data-progress' : latestDeployToDev().percentageComplete() }"></div>
                                            <!-- /ko -->
                                            Triggered by:
                                            <div class="build-type" data-bind="text: latestDeployToDev().triggeredBy()"></div>
                                            <div class="clear"></div>
    										<img data-bind="attr:{ src: '/content/users/' + latestDeployToDev().triggeredBy() + '.jpg' }" />
                                            <!-- ko if: latestDeployToDev().status() == "FAILURE" -->
                                                Reason for failure:
                                                <div class="build-failReason" data-bind="text: latestDeployToDev().statusText"></div>
                                                <div class="clear"></div>
                                            <!-- /ko -->
                                        </div>
                                    </li>
                                </ul>
                            </ul>
    					<!-- /ko -->    
					<!-- /ko -->    
                </div>
            </div> 
            <div class="bottomRight">
                <div class="sel-title">Execute Selenium Tests</div>
                <div class="accept-sel-panel">
                    <!-- ko if: latestSelenium() != null -->
    					<!-- ko if: !latestSelenium().triggeredBy() -->
                            <ul>
                                <ul>
                                    <!-- ko if: latestSelenium().status() == "FAILURE" -->
                                        <li data-bind="attr: { class: 'sel-failclass' + ' ' + latestSelenium().lowerStatus() + randomClass4()}">
                                            <div>
                                                <div class="build-branch" data-bind="text: latestSelenium().description"></div>
                                                <div class="build-type" data-bind="text: latestSelenium().buildType.name"></div>
                                                <div class="clear"></div>
                                                <div class="build-status" data-bind="text: latestSelenium().status"></div>
                                                <div class="clear"></div>
                                                <!-- ko if: latestSelenium().hasProgress() -->
                                                    <div class="progress-container" data-bind="attr: { 'data-progress' : latestSelenium().percentageComplete() }"></div>
                                                <!-- /ko -->
                                                Reason for failure:
                                                <div class="build-failReason" data-bind="text: latestSelenium().statusText"></div>
                                                <div class="clear"></div>
                                            </div> 
                                        </li>
                                    <!-- /ko -->
                                    <!-- ko if: latestSelenium().status() == "SUCCESS" -->
                                        <li data-bind="attr: { class: latestSelenium().lowerStatus() + randomClass4()}">
                                            <div>
                                                <div class="build-branch" data-bind="text: latestSelenium().description"></div>
                                                <div class="build-type" data-bind="text: latestSelenium().buildType.name"></div>
                                                <div class="clear"></div>
                                                <div class="build-status" data-bind="text: latestSelenium().status"></div>
                                                <div class="clear"></div>
                                                <!-- ko if: latestSelenium().hasProgress() -->
                                                    <div class="progress-container" data-bind="attr: { 'data-progress' : latestSelenium().percentageComplete() }"></div>
                                                <!-- /ko -->
                                            </div> 
                                        </li>
                                    <!-- /ko -->
                                </ul>
                            </ul>
                        <!-- /ko -->    
    					<!-- ko if: latestSelenium().triggeredBy() -->
    					    <ul>
                                <ul>
                                    <!-- ko if: latestSelenium().status() == "FAILURE" -->
                                        <li data-bind="attr: { class: 'sel-failclass' + ' ' + latestSelenium().lowerStatus() + ' ' + latestSelenium().triggeredBy() }">
                                            <div>
                                                <div class="build-branch" data-bind="text: latestSelenium().description"></div>
                                                <div class="build-type" data-bind="text: latestSelenium().buildType.name"></div>
                                                <div class="clear"></div>
                                                <div class="build-status" data-bind="text: latestSelenium().status"></div>
                                                <div class="clear"></div>
                                                <!-- ko if: latestSelenium().hasProgress() -->
                                                    <div class="progress-container" data-bind="attr: { 'data-progress' : latestSelenium().percentageComplete() }"></div>
                                                <!-- /ko -->
                                                Triggered by:
                                                <div class="build-type" data-bind="text: latestSelenium().triggeredBy()"></div>
                                                <div class="clear"></div>
    											<img data-bind="attr:{ src: '/content/users/' + latestSelenium().triggeredBy() + '.jpg' }" />
                                                Reason for failure:
                                                <div class="build-failReason" data-bind="text: latestSelenium().statusText"></div>
                                                <div class="clear"></div>
                                            </div> 
                                        </li>
                                    <!-- /ko -->
                                    <!-- ko if: latestSelenium().status() == "SUCCESS" -->
                                        <li data-bind="attr: { class: latestSelenium().lowerStatus() + ' ' + latestSelenium().triggeredBy() }">
                                            <div>
                                                <div class="build-branch" data-bind="text: latestSelenium().description"></div>
                                                <div class="build-type" data-bind="text: latestSelenium().buildType.name"></div>
                                                <div class="clear"></div>
                                                <div class="build-status" data-bind="text: latestSelenium().status"></div>
                                                <div class="clear"></div>
                                                <!-- ko if: latestSelenium().hasProgress() -->
                                                    <div class="progress-container" data-bind="attr: { 'data-progress' : latestSelenium().percentageComplete() }"></div>
                                                <!-- /ko -->
                                                Triggered by:
                                                <div class="build-type" data-bind="text: latestSelenium().triggeredBy()"></div>
                                                <div class="clear"></div>
    											<img data-bind="attr:{ src: '/content/users/' + latestSelenium().triggeredBy() + '.jpg' }" />
                                            </div> 
                                        </li>
                                    <!-- /ko -->
                                </ul>
                            </ul>
    					<!-- /ko -->
					<!-- /ko -->
                </div>
            </div>
        </div>   
        <div>         
            <div class="right">
                <div class="history-title">Most recent test runs</div>
                <div class="history-panel">
                    <ul data-bind="foreach: { data: builds.slice(0, 5) }">
                        <li data-bind="attr: { class: lowerStatus() }, css: { running: isRunning() }">
                            <div class="build-branch"  data-bind="text: description()"></div>
                            <div class="build-type" data-bind="text: buildType"></div>
                            <div class="clear"></div>
                            <div class="build-status" data-bind="text: isRunning() ? '' : status"></div>
                            <div class="clear"></div>
                            <!-- ko if: hasProgress() -->
                               <div class="progress-container" data-bind="attr: { 'data-progress' : percentageComplete() }"></div>
                            <!-- /ko -->
                        </li>
                    </ul>
                </div>
            </div>    
        </div>    
    </div>

    <div class="error-box" data-bind="showHide: hasError">
        <div data-bind="text: errorMessage"></div>
    </div>

    <script src="Script/Libraries/knockout-2.2.1.js"></script>
    <script src="Script/Libraries/knockout.mapping-2.4.1.js"></script>
    <script src="Script/Libraries/jquery-2.0.0.min.js"></script>
    <script src="Script/Libraries/jquery-ui.min.js"></script>
    <script src="Script/Libraries/queryStringDecoder.js"></script>

    <script src="Settings.js"></script>
    <script src="Script/Init.js"></script>
    <script src="Script/Utils.js"></script>

    <script src="Script/Libraries/Class.js"></script>
    <script src="Script/ViewModels/BaseBuild.js"></script>
    <script src="Script/ViewModels/SingleBuildViewModel.js"></script>
    <script src="Script/ViewModels/MainBuildViewModel.js"></script>
    <script src="Script/ViewModels/BuildScreenViewModel.js"></script>
</body>
</html>
